var N=Object.defineProperty,G=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var O=(r,e,i)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,T=(r,e)=>{for(var i in e||(e={}))W.call(e,i)&&O(r,i,e[i]);if(V)for(var i of V(e))K.call(e,i)&&O(r,i,e[i]);return r},I=(r,e)=>G(r,U(e));import{R,aa as M,U as P,L as H,a5 as u,$ as k,ab as q,ac as x,ad as J,ae as X,g as b,h as B,y as l,l as o,F as Y,G as Q,k as D,j as v,a9 as y,J as Z,A as _,a2 as A,a0 as j,a1 as $,af as ee,a3 as te,ag as ae,w as re,ah as le,D as L,ai as oe}from"./index.fe47ded2.js";import{E as ie,a as de}from"./el-button-group.f2a3c77b.js";import{P as ne,v as se,s as ce}from"./paging.b47fe018.js";import{S as ue,E as fe}from"./split.a0e5a638.js";import{T as me,a as pe,D as _e}from"./table_header2.12cc63a1.js";import{e as be,c as Ce,l as ge,g as he,d as ke}from"./organization.d26f2e7f.js";import De from"./select_org_post.5baf04b2.js";const Ee={name:"CreateEdit",components:{SeekbarForDrawer:M,SelectOrgPost:De},props:{propCreateEdit:Object},emits:["fCreateEditCallback"],setup(r,e){const{propCreateEdit:i}=P(r),t=H({drawerSize:"55%",formRef:{},selectStatus:u.SelectStatus,rules:{fid:[{type:"number",min:1,required:!0,message:"\u4E0A\u7EA7\u8282\u70B9\u4E3A\u5FC5\u586B\u9879",trigger:"blur"}],ftitle:[{type:"string",required:!0,message:"\u4E0A\u7EA7\u8282\u70B9\u4E3A\u5FC5\u586B\u9879",trigger:"blur"}],title:[{type:"string",required:!0,message:"\u7EC4\u7EC7\u673A\u6784\u540D\u79F0\u4E3A\u5FC5\u586B\u9879",trigger:"blur"}]},propSelectOrgPost:{isShow:!1,title:"\u9009\u62E9\u4E0A\u7EA7\u8282\u70B9",mode:"one"}}),F=(d,g)=>{i.value.curdFormData.avatar=d},C=d=>{u.objInit(i.value.curdFormData),u.objInit(i.value.curdFormData),d()},E=()=>{t.propSelectOrgPost.isShow=!0},h=d=>{d&&(i.value.curdFormData.fid=d.id,i.value.curdFormData.ftitle=d.title)},p=d=>{t.drawerSize=d},f=()=>{t.formRef.validate((d,g)=>{if(d)switch(i.value.curdFormData.action){case"insert":Ce(i.value.curdFormData).then(s=>{s.data.code===200&&(u.Curd.SuccessTips(s.data.msg),e.emit("fCreateEditCallback"))}).catch(s=>{u.Curd.FailTips(s.response.data.msg)});break;case"update":be(i.value.curdFormData).then(s=>{s.data.code===200&&(u.Curd.SuccessTips(s.data.msg),e.emit("fCreateEditCallback"))}).catch(s=>{u.Curd.FailTips(s.response.data.msg)});break}})};return I(T({},P(t)),{propCreateEdit:i,fSeekBarCallback:p,fUploadCallback:F,fSelectOrgPost:E,fSelectedOrgPostCallback:h,fClose:C,fConfirm:f})}},Se={class:"drawer-footer"};function ye(r,e,i,t,F,C){const E=k("SeekbarForDrawer"),h=A,p=j,f=$,d=q,g=ee,s=x,a=J,c=te,m=X,S=k("SelectOrgPost");return b(),B("div",null,[l(m,{modelValue:t.propCreateEdit.isShow,"onUpdate:modelValue":e[5]||(e[5]=n=>t.propCreateEdit.isShow=n),"before-close":t.fClose,"close-on-click-modal":!1,direction:"rtl",title:t.propCreateEdit.drawerTitle,size:r.drawerSize},{default:o(()=>[l(E,{onFSeekBarCallback:t.fSeekBarCallback},null,8,["onFSeekBarCallback"]),l(c,{ref:"formRef","inline-message":!0,model:t.propCreateEdit.curdFormData,rules:r.rules,"label-position":"left","label-width":"110px"},{default:o(()=>[l(g,{justify:"space-between"},{default:o(()=>[l(d,{span:11},{default:o(()=>[l(f,{label:"\u4E0A\u7EA7\u8282\u70B9",prop:"fid"},{default:o(()=>[l(p,{clearable:"",modelValue:t.propCreateEdit.curdFormData.ftitle,"onUpdate:modelValue":e[0]||(e[0]=n=>t.propCreateEdit.curdFormData.ftitle=n),readonly:""},{append:o(()=>[l(h,{icon:"Search",onClick:t.fSelectOrgPost},null,8,["onClick"])]),_:1},8,["modelValue"]),l(p,{type:"hidden",clearable:"",modelValue:t.propCreateEdit.curdFormData.fid,"onUpdate:modelValue":e[1]||(e[1]=n=>t.propCreateEdit.curdFormData.fid=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:11},{default:o(()=>[l(f,{label:"\u7EC4\u7EC7\u673A\u6784\u540D\u79F0",prop:"title"},{default:o(()=>[l(p,{clearable:"",modelValue:t.propCreateEdit.curdFormData.title,"onUpdate:modelValue":e[2]||(e[2]=n=>t.propCreateEdit.curdFormData.title=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{justify:"space-between"},{default:o(()=>[l(d,{span:11},{default:o(()=>[l(f,{label:"\u72B6\u6001"},{default:o(()=>[l(a,{modelValue:t.propCreateEdit.curdFormData.status,"onUpdate:modelValue":e[3]||(e[3]=n=>t.propCreateEdit.curdFormData.status=n),"fit-input-width":!0},{default:o(()=>[(b(!0),B(Y,null,Q(r.selectStatus,n=>(b(),D(s,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{justify:"space-between"},{default:o(()=>[l(d,{span:24},{default:o(()=>[l(f,{label:"\u5907\u6CE8"},{default:o(()=>[l(p,{clearable:"",type:"textarea",modelValue:t.propCreateEdit.curdFormData.remark,"onUpdate:modelValue":e[4]||(e[4]=n=>t.propCreateEdit.curdFormData.remark=n),rows:3,maxlength:"128","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),footer:o(()=>[v("div",Se,[l(h,{type:"primary",onClick:t.fConfirm},{default:o(()=>[y(Z(t.propCreateEdit.drawerTitle),1)]),_:1},8,["onClick"])])]),_:1},8,["modelValue","before-close","title","size"]),_("   \u5F15\u5165\u7EC4\u7EC7\u673A\u6784\u516C\u5171\u7EC4\u4EF6  "),l(S,{propSelect:r.propSelectOrgPost,onFSelectedCallback:t.fSelectedOrgPostCallback},null,8,["propSelect","onFSelectedCallback"])])}var ve=R(Ee,[["render",ye],["__scopeId","data-v-484b966e"],["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/components/system-setting/organization/create_edit.vue"]]);const Fe={name:"OrgPostIndex",components:{Split:ue,TableHeader1:me,TableHeader2:pe,CreateEdit:ve,DeleteDataDialog:_e,Paging:ne},setup(){const r=ae(),e=H({leftTreeContainerFixHeight:{overflowY:"auto",overflowX:"hidden",height:u.GetBrowserHeight()-115+"px",marginTop:"6px"},leftTree:{props:{label:"title",children:"children",isLeaf:"is_leaf"},curItemId:0,curItemTitle:"",curItemIsLeaf:!1,data:[]},bodyHeight:u.BodyHeight(),tableRef:{},tableList:{searchKeyWords:{title:"",fid:0,page:1,limit:20},total:0,data:[],buttonGroupIsShow:!1,buttonList:{insert:"insert",delete:"delete",update:"update",select:"select"},style:{width:"100%",height:u.TableHeight()}},curdCreateEdit:{isShow:!1,drawerTitle:"",curdFormData:{action:"",id:0,fid:"",ftitle:"",title:"",status:1,remark:""}},curdDelete:{actionName:"",isShow:!1,ids:"",delCounts:0,serverResCode:0,serverResMsg:""}}),i=(a,c)=>{let m=a.level===0?0:a.data.id;he(m).then(S=>(e.leftTree.data=S.data.data,a.level===0&&e.leftTree.data.length>0&&(e.leftTree.curItemIsLeaf=e.leftTree.data[0].is_leaf,e.leftTree.curItemId=e.leftTree.data[0].id,e.leftTree.curItemTitle=e.leftTree.data[0].title,e.tableList.searchKeyWords.fid=e.leftTree.curItemId),c(e.leftTree.data))).catch(S=>c([]))},t=(a,c,m)=>{a.id>0&&e.leftTree.curItemId!==a.id&&(e.leftTree.curItemIsLeaf=a.is_leaf,e.leftTree.curItemId=a.id,e.leftTree.curItemTitle=a.title,e.tableList.searchKeyWords.fid=e.leftTree.curItemId)};re(()=>e.leftTree.curItemId,(a,c)=>{e.leftTree.curItemIsLeaf===!1&&a>=0&&c!==void 0?C():e.leftTree.curItemIsLeaf&&(e.tableList.data=[])},{deep:!0,immediate:!0}),(()=>{se(r.currentRoute.value.meta.id).then(a=>{ce(a.data.data,e.tableList.buttonList),e.tableList.buttonGroupIsShow=!0}).catch(a=>{})})();const C=()=>{ge(e.tableList.searchKeyWords).then(a=>{e.tableList.data=a.data.data.data,e.tableList.total=a.data.data.count}).catch(a=>{e.tableList.data=[],e.tableList.total=0})},E=()=>{C()},h=a=>{switch(a){case"insert":e.curdCreateEdit.curdFormData.status=1,e.curdCreateEdit.curdFormData.fid=e.leftTree.curItemId,e.curdCreateEdit.curdFormData.ftitle=e.leftTree.curItemTitle,delete e.curdCreateEdit.curdFormData.id;break;case"update":const c=e.tableRef.getSelectionRows();if(u.Curd.EditCheck(c.length===1))e.curdCreateEdit.curdFormData=Object.assign({},c[0]),(e.curdCreateEdit.curdFormData.ftitle===void 0||e.curdCreateEdit.curdFormData.ftitle==="")&&(e.curdCreateEdit.curdFormData.ftitle=e.leftTree.curItemTitle),delete e.curdCreateEdit.curdFormData.created_at,delete e.curdCreateEdit.curdFormData.updated_at;else return;break}e.curdCreateEdit.curdFormData.action=a,e.curdCreateEdit.drawerTitle=u.CurdActionName[a],e.curdCreateEdit.isShow=!0},p=()=>{C()},f=a=>{const c=e.tableRef.getSelectionRows(),m=u.GetArrayColumnConcatVals(c,"id");u.Curd.DestroyCheckForOneItem(m.id.length===1)&&(e.curdDelete.actionName=u.CurdActionName[a],e.curdDelete.isShow=!0,e.curdDelete.ids=m.id.toString(),e.curdDelete.delCounts=m.id.length)},d=()=>{ke(e.curdDelete.ids).then(a=>{e.curdDelete.serverResCode=a.data.code,e.curdDelete.serverResMsg=a.data.msg,C()}).catch(a=>{e.curdDelete.serverResCode=a.response.status,e.curdDelete.serverResMsg=a.response.data.msg})},g=(a,c)=>u.StatusMap[a.status],s=(a,c,m)=>{e.tableRef.toggleRowSelection(a,void 0)};return I(T({},P(e)),{fASyncData:i,fLeftTreeCurrentChange:t,fSearch:C,fPageCallback:E,fCreateEdit:h,fCreateEditCallback:p,fDelete:f,fDeleteCallback:d,fFormatter:g,fTableRowClick:s})}},we={class:"tableList-area"},Te={class:"toolBanner"},Ie=y(" \u7EC4\u7EC7\u673A\u6784\u540D\u79F0: "),Le=y("\u67E5\u8BE2"),Pe=y("\u65B0\u589E"),Re=y("\u4FEE\u6539"),Ve=y("\u5220\u9664"),Oe={class:"paging-area"};function Be(r,e,i,t,F,C){const E=fe,h=le,p=j,f=A,d=oe,g=k("TableHeader1"),s=ie,a=k("TableHeader2"),c=de,m=k("Paging"),S=k("CreateEdit"),n=k("DeleteDataDialog"),z=k("Split");return b(),D(z,null,{left:o(()=>[l(h,{style:L(r.leftTreeContainerFixHeight),height:r.leftTreeContainerFixHeight.height},{default:o(()=>[l(E,{"expand-on-click-node":!1,"node-key":"id","current-node-key":1,"highlight-current":!0,"empty-text":"\u6682\u65E0\u6570\u636E",props:r.leftTree.props,"default-expanded-keys":[1],load:t.fASyncData,lazy:"",onNodeClick:t.fLeftTreeCurrentChange},null,8,["props","load","onNodeClick"])]),_:1},8,["style","height"])]),right:o(()=>[v("div",{style:L({height:r.bodyHeight})},[v("div",we,[v("div",Te,[Ie,l(p,{modelValue:r.tableList.searchKeyWords.title,"onUpdate:modelValue":e[0]||(e[0]=w=>r.tableList.searchKeyWords.title=w),placeholder:"\u5173\u952E\u8BCD",class:"keyWordsInput"},null,8,["modelValue"]),r.tableList.buttonGroupIsShow?(b(),D(d,{key:0},{default:o(()=>[r.tableList.buttonList.select?(b(),D(f,{key:0,type:"primary",onClick:t.fSearch,icon:"Search"},{default:o(()=>[Le]),_:1},8,["onClick"])):_("v-if",!0),r.tableList.buttonList.insert?(b(),D(f,{key:1,type:"success",onClick:e[1]||(e[1]=w=>t.fCreateEdit("insert")),icon:"Plus"},{default:o(()=>[Pe]),_:1})):_("v-if",!0),r.tableList.buttonList.update?(b(),D(f,{key:2,type:"primary",onClick:e[2]||(e[2]=w=>t.fCreateEdit("update")),icon:"Edit"},{default:o(()=>[Re]),_:1})):_("v-if",!0),r.tableList.buttonList.delete?(b(),D(f,{key:3,type:"danger",onClick:e[3]||(e[3]=w=>t.fDelete("delete")),icon:"Delete"},{default:o(()=>[Ve]),_:1})):_("v-if",!0)]),_:1})):_("v-if",!0)]),l(c,{border:"","highlight-current-row":!0,style:L(r.tableList.style),height:r.tableList.style.height,data:r.tableList.data,ref:"tableRef",onRowClick:t.fTableRowClick},{default:o(()=>[l(g),_("    \u2193\u2193\u2193\u2193   \u4E1A\u52A1\u5B57\u6BB5  \u2193\u2193\u2193\u2193   "),l(s,{prop:"title",label:"\u7EC4\u7EC7\u673A\u6784\u540D\u79F0",sortable:"","show-overflow-tooltip":""}),_("     \u2191\u2191\u2191\u2191   \u4E1A\u52A1\u5B57\u6BB5  \u2191\u2191\u2191\u2191   "),l(s,{prop:"status",label:"\u72B6\u6001",sortable:"","show-overflow-tooltip":"",formatter:t.fFormatter},null,8,["formatter"]),l(a)]),_:1},8,["style","height","data","onRowClick"])]),v("div",Oe,[l(m,{propPage:r.tableList,onFPageCallback:t.fPageCallback},null,8,["propPage","onFPageCallback"])]),_("    \u65B0\u589E\u3001\u4FEE\u6539\u7EC4\u4EF6\uFF1A \u9700\u8981\u4E24\u4E2A\u5FC5\u4F20\u53C2\u6570\uFF1A1.\u5C5E\u6027\u53D8\u91CF\u30012.\u65B0\u589E\u6216\u8005\u4FEE\u6539\u540E\u7684\u56DE\u8C03\u51FD\u6570 "),l(S,{propCreateEdit:r.curdCreateEdit,onFCreateEditCallback:t.fCreateEditCallback},null,8,["propCreateEdit","onFCreateEditCallback"]),_("    \u5220\u9664\u7EC4\u4EF6 : \u9700\u8981\u4E24\u4E2A\u5FC5\u4F20\u53C2\u6570\uFF1A1.\u5C5E\u6027\u53D8\u91CF\u30012.\u5220\u9664\u540E\u7684\u56DE\u8C03\u51FD\u6570  "),l(n,{propDelete:r.curdDelete,onFDeleteCallback:t.fDeleteCallback},null,8,["propDelete","onFDeleteCallback"])],4)]),_:1})}var He=R(Fe,[["render",Be],["__scopeId","data-v-6b056413"],["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/components/system-setting/organization/index.vue"]]);const Ae={__name:"organization",setup(r){return(e,i)=>(b(),D(He))}};var qe=R(Ae,[["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/views/system-setting/organization.vue"]]);export{qe as default};
