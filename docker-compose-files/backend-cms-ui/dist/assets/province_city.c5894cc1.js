var U=Object.defineProperty,z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var B=(r,e,n)=>e in r?U(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,T=(r,e)=>{for(var n in e||(e={}))K.call(e,n)&&B(r,n,e[n]);if(R)for(var n of R(e))O.call(e,n)&&B(r,n,e[n]);return r},L=(r,e)=>z(r,W(e));import{R as P,aa as M,U as V,L as A,a5 as u,$ as g,ab as q,ac as x,ad as J,ae as X,g as C,h as H,y as a,l as o,F as Y,G as Q,k as v,j as S,a9 as E,J as Z,A as p,a2 as j,a0 as N,a1 as $,af as ee,a3 as te,ag as ae,w as re,ah as le,D as I,ai as oe}from"./index.fe47ded2.js";import{E as ne,a as ie}from"./el-button-group.f2a3c77b.js";import{P as de,v as se,s as ce}from"./paging.b47fe018.js";import{S as ue,E as me}from"./split.a0e5a638.js";import{S as fe,e as pe,c as Ce,l as _e,g as be,d as he}from"./select_province_city.ebd11411.js";import{T as ge,a as ve,D as ke}from"./table_header2.12cc63a1.js";const ye={name:"CreateEdit",components:{SeekbarForDrawer:M,SelectProvinceCity:fe},props:{propCreateEdit:Object},emits:["fCreateEditCallback"],setup(r,e){const{propCreateEdit:n}=V(r),t=A({drawerSize:"55%",formRef:{},selectStatus:u.SelectStatus,rules:{fid:[{type:"number",min:1,required:!0,message:"\u4E0A\u7EA7\u8282\u70B9\u4E3A\u5FC5\u586B\u9879",trigger:"blur"}],name:[{type:"string",required:!0,message:"\u533A\u57DF\u540D\u79F0\u4E3A\u5FC5\u586B\u9879",trigger:"blur"}]},propSelectProvinceCity:{isShow:!1,title:"\u9009\u62E9\u7701\u4EFD\u57CE\u5E02",mode:"one"}}),w=(i,b)=>{n.value.curdFormData.avatar=i},_=i=>{u.objInit(n.value.curdFormData),u.objInit(n.value.curdFormData),i()},k=i=>{t.drawerSize=i},h=()=>{t.formRef.validate((i,b)=>{if(i)switch(n.value.curdFormData.action){case"insert":Ce(n.value.curdFormData).then(s=>{s.data.code===200&&(u.Curd.SuccessTips(s.data.msg),e.emit("fCreateEditCallback"))}).catch(s=>{u.Curd.FailTips(s.response.data.msg)});break;case"update":pe(n.value.curdFormData).then(s=>{s.data.code===200&&(u.Curd.SuccessTips(s.data.msg),e.emit("fCreateEditCallback"))}).catch(s=>{u.Curd.FailTips(s.response.data.msg)});break}})},f=()=>{t.propSelectProvinceCity.isShow=!0},m=i=>{i&&(n.value.curdFormData.fid=i.id,n.value.curdFormData.ftitle=i.title)};return L(T({},V(t)),{propCreateEdit:n,fSeekBarCallback:k,fUploadCallback:w,fClose:_,fConfirm:h,fSelectProvinceCity:f,fSelectedProvinceCityCallback:m})}},De={class:"drawer-footer"};function Ee(r,e,n,t,w,_){const k=g("SeekbarForDrawer"),h=j,f=N,m=$,i=q,b=ee,s=x,l=J,c=te,y=X,D=g("SelectProvinceCity");return C(),H("div",null,[a(y,{modelValue:t.propCreateEdit.isShow,"onUpdate:modelValue":e[6]||(e[6]=d=>t.propCreateEdit.isShow=d),"before-close":t.fClose,"close-on-click-modal":!1,direction:"rtl",title:t.propCreateEdit.drawerTitle,size:r.drawerSize},{default:o(()=>[a(k,{onFSeekBarCallback:t.fSeekBarCallback},null,8,["onFSeekBarCallback"]),a(c,{ref:"formRef",model:t.propCreateEdit.curdFormData,rules:r.rules,"label-position":"left","label-width":"110px"},{default:o(()=>[a(b,{justify:"space-between"},{default:o(()=>[a(i,{span:11},{default:o(()=>[a(m,{label:"\u4E0A\u7EA7\u8282\u70B9",prop:"fid"},{default:o(()=>[a(f,{clearable:"",modelValue:t.propCreateEdit.curdFormData.ftitle,"onUpdate:modelValue":e[0]||(e[0]=d=>t.propCreateEdit.curdFormData.ftitle=d),readonly:""},{append:o(()=>[a(h,{icon:"Search",onClick:t.fSelectProvinceCity},null,8,["onClick"])]),_:1},8,["modelValue"]),a(f,{type:"hidden",clearable:"",modelValue:t.propCreateEdit.curdFormData.fid,"onUpdate:modelValue":e[1]||(e[1]=d=>t.propCreateEdit.curdFormData.fid=d)},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:11},{default:o(()=>[a(m,{label:"\u533A\u57DF\u540D\u79F0",prop:"name"},{default:o(()=>[a(f,{clearable:"",modelValue:t.propCreateEdit.curdFormData.name,"onUpdate:modelValue":e[2]||(e[2]=d=>t.propCreateEdit.curdFormData.name=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(b,{justify:"space-between"},{default:o(()=>[a(i,{span:11},{default:o(()=>[a(m,{label:"\u72B6\u6001"},{default:o(()=>[a(l,{modelValue:t.propCreateEdit.curdFormData.status,"onUpdate:modelValue":e[3]||(e[3]=d=>t.propCreateEdit.curdFormData.status=d),"fit-input-width":!0},{default:o(()=>[(C(!0),H(Y,null,Q(r.selectStatus,d=>(C(),v(s,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(i,{span:11},{default:o(()=>[a(m,{label:"\u6392\u5E8F"},{default:o(()=>[a(f,{type:"number",clearable:"",modelValue:t.propCreateEdit.curdFormData.sort,"onUpdate:modelValue":e[4]||(e[4]=d=>t.propCreateEdit.curdFormData.sort=d),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(b,{justify:"space-between"},{default:o(()=>[a(i,{span:24},{default:o(()=>[a(m,{label:"\u5907\u6CE8"},{default:o(()=>[a(f,{clearable:"",type:"textarea",modelValue:t.propCreateEdit.curdFormData.remark,"onUpdate:modelValue":e[5]||(e[5]=d=>t.propCreateEdit.curdFormData.remark=d),rows:3,maxlength:"128","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),footer:o(()=>[S("div",De,[a(h,{type:"primary",onClick:t.fConfirm},{default:o(()=>[E(Z(t.propCreateEdit.drawerTitle),1)]),_:1},8,["onClick"])])]),_:1},8,["modelValue","before-close","title","size"]),p("    \u5F15\u5165\u7701\u4EFD\u57CE\u5E02\u516C\u5171\u7EC4\u4EF6"),a(D,{propSelect:r.propSelectProvinceCity,onFSelectedCallback:t.fSelectedProvinceCityCallback},null,8,["propSelect","onFSelectedCallback"])])}var Se=P(ye,[["render",Ee],["__scopeId","data-v-6b2ff5f0"],["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/components/data-dictionary/province-city/create_edit.vue"]]);const we={name:"ProvinceCityIndex",components:{Split:ue,TableHeader1:ge,TableHeader2:ve,CreateEdit:Se,DeleteDataDialog:ke,Paging:de},setup(){const r=ae(),e=A({leftTreeContainerFixHeight:{overflowY:"auto",overflowX:"hidden",height:u.GetBrowserHeight()-115+"px",marginTop:"6px"},leftTree:{props:{label:"title",children:"children",isLeaf:"is_leaf"},curItemId:0,curItemTitle:"",data:[]},bodyHeight:u.BodyHeight(),tableRef:{},tableList:{searchKeyWords:{name:"",fid:0,page:1,limit:20},total:0,data:[],buttonGroupIsShow:!1,buttonList:{insert:"insert",delete:"delete",update:"update",select:"select"},style:{width:"100%",height:u.TableHeight()}},curdCreateEdit:{isShow:!1,drawerTitle:"",curdFormData:{action:"",id:0,fid:"",ftitle:"",name:"",sort:0,status:1,remark:""}},curdDelete:{actionName:"",isShow:!1,ids:"",delCounts:0,serverResCode:0,serverResMsg:""}}),n=(l,c)=>{let y=l.level===0?0:l.data.id;be(y).then(D=>(e.leftTree.data=D.data.data,l.level===0&&e.leftTree.data.length>0&&(e.leftTree.curItemId=e.leftTree.data[0].id,e.leftTree.curItemTitle=e.leftTree.data[0].title,e.tableList.searchKeyWords.fid=e.leftTree.curItemId),c(e.leftTree.data))).catch(D=>c([]))},t=(l,c,y)=>{l.id>0&&e.leftTree.curItemId!==l.id&&(e.leftTree.curItemId=l.id,e.leftTree.curItemTitle=l.title,e.tableList.searchKeyWords.fid=e.leftTree.curItemId)};re(()=>e.leftTree.curItemId,(l,c)=>{l>0&&c!==void 0&&_()}),(()=>{se(r.currentRoute.value.meta.id).then(l=>{ce(l.data.data,e.tableList.buttonList),e.tableList.buttonGroupIsShow=!0}).catch(l=>{})})();const _=()=>{_e(e.tableList.searchKeyWords).then(l=>{e.tableList.data=l.data.data.data,e.tableList.total=l.data.data.count}).catch(l=>{e.tableList.data=[],e.tableList.total=0})},k=()=>{_()},h=l=>{switch(l){case"insert":e.curdCreateEdit.curdFormData.status=1,e.curdCreateEdit.curdFormData.fid=e.leftTree.curItemId,e.curdCreateEdit.curdFormData.ftitle=e.leftTree.curItemTitle,delete e.curdCreateEdit.curdFormData.id;break;case"update":const c=e.tableRef.getSelectionRows();if(u.Curd.EditCheck(c.length===1))e.curdCreateEdit.curdFormData=Object.assign({},c[0]),(e.curdCreateEdit.curdFormData.ftitle===void 0||e.curdCreateEdit.curdFormData.ftitle==="")&&(e.curdCreateEdit.curdFormData.ftitle=e.leftTree.curItemTitle),delete e.curdCreateEdit.curdFormData.created_at,delete e.curdCreateEdit.curdFormData.updated_at;else return;break}e.curdCreateEdit.curdFormData.action=l,e.curdCreateEdit.drawerTitle=u.CurdActionName[l],e.curdCreateEdit.isShow=!0},f=()=>{_()},m=()=>{const l=e.tableRef.getSelectionRows(),c=u.GetArrayColumnConcatVals(l,"id");u.Curd.DestroyCheckForOneItem(c.id.length===1)&&(e.curdDelete.actionName=u.CurdActionName.delete,e.curdDelete.isShow=!0,e.curdDelete.ids=c.id.toString(),e.curdDelete.delCounts=c.id.length)},i=()=>{he(e.curdDelete.ids).then(l=>{e.curdDelete.serverResCode=l.data.code,e.curdDelete.serverResMsg=l.data.msg,_()}).catch(l=>{e.curdDelete.serverResCode=l.response.status,e.curdDelete.serverResMsg=l.response.data.msg})},b=(l,c)=>u.StatusMap[l.status],s=(l,c,y)=>{e.tableRef.toggleRowSelection(l,void 0)};return L(T({},V(e)),{fASyncData:n,fLeftTreeCurrentChange:t,fSearch:_,fPageCallback:k,fCreateEdit:h,fCreateEditCallback:f,fDelete:m,fDeleteCallback:i,fFormatter:b,fTableRowClick:s})}},Fe={class:"tableList-area"},Te={class:"toolBanner"},Le=E(" \u533A\u57DF\u540D\u79F0: "),Ie=E("\u67E5\u8BE2"),Ve=E("\u65B0\u589E"),Pe=E("\u4FEE\u6539"),Re=E("\u5220\u9664"),Be={class:"paging-area"};function He(r,e,n,t,w,_){const k=me,h=le,f=N,m=j,i=oe,b=g("TableHeader1"),s=ne,l=g("TableHeader2"),c=ie,y=g("Paging"),D=g("CreateEdit"),d=g("DeleteDataDialog"),G=g("Split");return C(),v(G,null,{left:o(()=>[a(h,{style:I(r.leftTreeContainerFixHeight),height:r.leftTreeContainerFixHeight.height},{default:o(()=>[a(k,{"expand-on-click-node":!1,"node-key":"id","current-node-key":1,"empty-text":"\u6682\u65E0\u6570\u636E",props:r.leftTree.props,load:t.fASyncData,lazy:"","highlight-current":!0,onNodeClick:t.fLeftTreeCurrentChange},null,8,["props","load","onNodeClick"])]),_:1},8,["style","height"])]),right:o(()=>[S("div",{style:I({height:r.bodyHeight})},[S("div",Fe,[S("div",Te,[Le,a(f,{modelValue:r.tableList.searchKeyWords.name,"onUpdate:modelValue":e[0]||(e[0]=F=>r.tableList.searchKeyWords.name=F),placeholder:"\u5173\u952E\u8BCD",class:"keyWordsInput"},null,8,["modelValue"]),r.tableList.buttonGroupIsShow?(C(),v(i,{key:0},{default:o(()=>[r.tableList.buttonList.select?(C(),v(m,{key:0,type:"primary",onClick:t.fSearch,icon:"Search"},{default:o(()=>[Ie]),_:1},8,["onClick"])):p("v-if",!0),r.tableList.buttonList.insert?(C(),v(m,{key:1,type:"success",onClick:e[1]||(e[1]=F=>t.fCreateEdit("insert")),icon:"Plus"},{default:o(()=>[Ve]),_:1})):p("v-if",!0),r.tableList.buttonList.update?(C(),v(m,{key:2,type:"primary",onClick:e[2]||(e[2]=F=>t.fCreateEdit("update")),icon:"Edit"},{default:o(()=>[Pe]),_:1})):p("v-if",!0),r.tableList.buttonList.delete?(C(),v(m,{key:3,type:"danger",onClick:t.fDelete,icon:"Delete"},{default:o(()=>[Re]),_:1},8,["onClick"])):p("v-if",!0)]),_:1})):p("v-if",!0)]),a(c,{border:"","highlight-current-row":!0,style:I(r.tableList.style),height:r.tableList.style.height,data:r.tableList.data,ref:"tableRef",onRowClick:t.fTableRowClick},{default:o(()=>[a(b),p("    \u2193\u2193\u2193\u2193   \u4E1A\u52A1\u5B57\u6BB5  \u2193\u2193\u2193\u2193   "),a(s,{prop:"name",label:"\u533A\u57DF\u540D\u79F0",sortable:"","show-overflow-tooltip":""}),a(s,{prop:"node_level",label:"\u8282\u70B9\u6DF1\u5EA6",sortable:"","show-overflow-tooltip":""}),a(s,{prop:"sort",label:"\u6392\u5E8F",sortable:"","show-overflow-tooltip":""}),p("     \u2191\u2191\u2191\u2191   \u4E1A\u52A1\u5B57\u6BB5  \u2191\u2191\u2191\u2191   "),a(s,{prop:"status",label:"\u72B6\u6001",sortable:"","show-overflow-tooltip":"",formatter:t.fFormatter},null,8,["formatter"]),a(l)]),_:1},8,["style","height","data","onRowClick"])]),S("div",Be,[a(y,{propPage:r.tableList,onFPageCallback:t.fPageCallback},null,8,["propPage","onFPageCallback"])]),p("    \u65B0\u589E\u3001\u4FEE\u6539\u7EC4\u4EF6\uFF1A \u9700\u8981\u4E24\u4E2A\u5FC5\u4F20\u53C2\u6570\uFF1A1.\u5C5E\u6027\u53D8\u91CF\u30012.\u65B0\u589E\u6216\u8005\u4FEE\u6539\u540E\u7684\u56DE\u8C03\u51FD\u6570 "),a(D,{propCreateEdit:r.curdCreateEdit,onFCreateEditCallback:t.fCreateEditCallback},null,8,["propCreateEdit","onFCreateEditCallback"]),p("    \u5220\u9664\u7EC4\u4EF6 : \u9700\u8981\u4E24\u4E2A\u5FC5\u4F20\u53C2\u6570\uFF1A1.\u5C5E\u6027\u53D8\u91CF\u30012.\u5220\u9664\u540E\u7684\u56DE\u8C03\u51FD\u6570  "),a(d,{propDelete:r.curdDelete,onFDeleteCallback:t.fDeleteCallback},null,8,["propDelete","onFDeleteCallback"])],4)]),_:1})}var Ae=P(we,[["render",He],["__scopeId","data-v-2a800d15"],["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/components/data-dictionary/province-city/index.vue"]]);const je={__name:"province_city",setup(r){return(e,n)=>(C(),v(Ae))}};var Me=P(je,[["__file","E:/Project/2022/ginskeleton_series/GinSkeleton-Admin2/gin-skeleton-admin2-frontend/src/views/data-dictionary/province_city.vue"]]);export{Me as default};
